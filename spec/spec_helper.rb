require 'bundler/setup'
Bundler.setup

require 'station_master'

require 'pry'
require 'webmock/rspec'
include WebMock::API
require 'benchmark'

RSpec.configure do |config|
  # stubs for Station.all
  config.before(:each) do
    stub_request(:get, 'http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/elencoStazioni/0').
      to_return(status: 200, body: <<-JSON.squish, headers: {})
        [{"codReg":15,"tipoStazione":3,"dettZoomStaz":[],"pstaz":[],"mappaCitta":{"urlImagePinpoint":"","urlImageBaloon":""},"codiceStazione":"S11212","codStazione":"S11212","lat":40.787682,"lon":15.758093,"latMappaCitta":0.0,"lonMappaCitta":0.0,"localita":{"nomeLungo":"CASTEL LAGOPESOLE","nomeBreve":"Castel Lagopes.","label":"","id":"S11212"},"esterno":false,"offsetX":0,"offsetY":0,"nomeCitta":"A"},{"codReg":15,"tipoStazione":3,"dettZoomStaz":[],"pstaz":[],"mappaCitta":{"urlImagePinpoint":"","urlImageBaloon":""},"codiceStazione":"S11214","codStazione":"S11214","lat":40.714667,"lon":15.785619,"latMappaCitta":0.0,"lonMappaCitta":0.0,"localita":{"nomeLungo":"AVIGLIANO LUCANIA","nomeBreve":"Avigliano Luc.","label":"","id":"S11214"},"esterno":false,"offsetX":0,"offsetY":0,"nomeCitta":"A"}]
      JSON

    stub_request(:get, 'http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/elencoStazioni/1').
      to_return(status: 200, body: <<-JSON.squish, headers: {})
        [{"codReg":15,"tipoStazione":3,"dettZoomStaz":[],"pstaz":[],"mappaCitta":{"urlImagePinpoint":"","urlImageBaloon":""},"codiceStazione":"S11219","codStazione":"S11219","lat":41.062304,"lon":15.595094,"latMappaCitta":0.0,"lonMappaCitta":0.0,"localita":{"nomeLungo":"LEONESSA","nomeBreve":"Leonessa","label":"","id":"S11219"},"esterno":false,"offsetX":0,"offsetY":0,"nomeCitta":"A"}]
      JSON

    stub_request(:get, 'http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/elencoStazioni/2').
      to_return(status: 200, body: '[]', headers: {})
  end

  # stubs for Station.find_by_city
  config.before(:each) do
    ['S11212', 'S11214', 'S11219'].each do |station_id|
      region_id = 15

      stub_request(:get, "http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/regione/#{station_id}").
        to_return(status: 200, body: "#{region_id}", headers: {})

      body = case station_id
        when 'S11212' then '{"codReg":15,"tipoStazione":3,"dettZoomStaz":[],"pstaz":[],"mappaCitta":{"urlImagePinpoint":"","urlImageBaloon":""},"codiceStazione":"S11212","codStazione":"S11212","lat":40.787682,"lon":15.758093,"latMappaCitta":0.0,"lonMappaCitta":0.0,"localita":{"nomeLungo":"CASTEL LAGOPESOLE","nomeBreve":"Castel Lagopes.","label":"","id":"S11212"},"esterno":false,"offsetX":0,"offsetY":0,"nomeCitta":"A"}'
        when 'S11214' then '{"codReg":15,"tipoStazione":3,"dettZoomStaz":[],"pstaz":[],"mappaCitta":{"urlImagePinpoint":"","urlImageBaloon":""},"codiceStazione":"S11214","codStazione":"S11214","lat":40.714667,"lon":15.785619,"latMappaCitta":0.0,"lonMappaCitta":0.0,"localita":{"nomeLungo":"AVIGLIANO LUCANIA","nomeBreve":"Avigliano Luc.","label":"","id":"S11214"},"esterno":false,"offsetX":0,"offsetY":0,"nomeCitta":"A"}'
        when 'S11219' then '{"codReg":15,"tipoStazione":3,"dettZoomStaz":[],"pstaz":[],"mappaCitta":{"urlImagePinpoint":"","urlImageBaloon":""},"codiceStazione":"S11219","codStazione":"S11219","lat":41.062304,"lon":15.595094,"latMappaCitta":0.0,"lonMappaCitta":0.0,"localita":{"nomeLungo":"LEONESSA","nomeBreve":"Leonessa","label":"","id":"S11219"},"esterno":false,"offsetX":0,"offsetY":0,"nomeCitta":"A"}'
      end

      stub_request(:get, "http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/dettaglioStazione/#{station_id}/#{region_id}").
        to_return(status: 200, body: body, headers: {})
    end

    stub_request(:get, "http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/autocompletaStazione/Tor").
      to_return(status: 200, body: <<-JSON, headers: {})
        TORINO P.NUOVA|S00219
        TOR SAPIENZA|S08501
        TOR VERGATA|S08655
        TORA PRESENZANO|S09202
        TORANO LATTARICO|S11906
        TORCHIARA|S11706
        TORINO DORA|S00224
        TORINO LINGOTTO|S00452
        TORINO PORTA SUSA|S00035
        TORINO REBAUDENGO FOSSATA|S00060
        TORINO S. PAOLO|S00223
        TORINO STURA|S00228
        TORRALBA|S12865
        TORRAZZA P.|S00234
        TORRE ANNUNZIATA CENTRALE|S09806
        TORRE ANNUNZIATA CITTA'|S09805
        TORRE DEI PASSERI|S07706
        TORRE DEL GRECO|S09803
        TORRE DEL LAGO PUCCINI|S06015
        TORRE DE` PICENARDI|S01918
        TORRE IN PIETRA-PALIDORO|S08019
        TORRE MELISSA|S11821
        TORRE ORSAIA|S11717
        TORRE PELLICE|S00524
        TORRE S.GIORGIO|S00545
        TORREBERETTI|S00039
        TORREMEZZO DI FALCONARA|S11971
        TORRENIERI|S06817
        TORRICELLA|S07011
        TORRICOLA|S08600
        TORRILE S. POLO|S01853
        TORRITA DI SIENA|S06854
        TORTONA|S01810
        TORTORETO LIDO|S07801
        TORVISCOSA|S03206
      JSON
  end

  # stubs for Schedule.find_station_arrivals
  config.before(:each) do
    stub_request(:get, "http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/arrivi/S00219/Mon%20Nov%2010%202014%2022:35:26%20GMT+0100%20(CET)").
      to_return(status: 200, headers: {}, body: <<-JSON.squish)
        [{"numeroTreno":24875,"categoria":"REG","categoriaDescrizione":null,"origine":"SUSA","codOrigine":"S00260","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"14             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415654100000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:15","compOrarioPartenza":null,"compNumeroTreno":"REG 24875","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png22:15","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":2530,"categoria":"REG","categoriaDescrizione":null,"origine":"GENOVA BRIGNOLE","codOrigine":"S04702","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":true,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"7              ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415655000000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":7,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:30","compOrarioPartenza":null,"compNumeroTreno":"REG 2530","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"ritardo01_txt","compClassRitardoLine":"ritardo01_line","compImgRitardo2":"/vt_static/img/legenda/icone_legenda/ritardo01.png","compImgRitardo":"/vt_static/img/legenda/icone_legenda/ritardo01.png","compRitardo":["ritardo 7 min.","delay 7 min.","Verspätung 7 Min.","retard de 7 min.","retraso de 7 min.","întârziere 7 min.","遅延 7 分","误点 7分钟","опоздание на 7 минут"],"compRitardoAndamento":["con un ritardo di 7 min.","7 minutes late","mit einer Verzögerung von 7 Min.","avec un retard de 7 min.","con un retraso de 7 min.","cu o întârziere de 7 min.","7 分の遅延","误点 7分钟","с опозданием в 7 минут"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png22:37","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":24832,"categoria":"REG","categoriaDescrizione":null,"origine":"IVREA","codOrigine":"S00154","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"18             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415655120000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:32","compOrarioPartenza":null,"compNumeroTreno":"REG 24832","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png22:32","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":10216,"categoria":"REG","categoriaDescrizione":null,"origine":"CUNEO","codOrigine":"S00610","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"3              ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415655300000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:35","compOrarioPartenza":null,"compNumeroTreno":"REG 10216","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png22:35","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":9580,"categoria":"ES*","categoriaDescrizione":null,"origine":"ROMA TERMINI","codOrigine":"S08409","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":true,"codiceCliente":1,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"17             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"A","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415655600000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":6,"tipoProdotto":"100","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:40","compOrarioPartenza":null,"compNumeroTreno":"ES* FR 9580","compOrientamento":["Executive in coda","Executive at the rear","Executive Zugende","Executive en queue","Executive al final del tren","Executive la coada trenului","背面のExecutive","Executive在后几节车厢","Executive в хвосте поезда"],"compTipologiaTreno":"nazionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["ritardo 6 min.","delay 6 min.","Verspätung 6 Min.","retard de 6 min.","retraso de 6 min.","întârziere 6 min.","遅延 6 分","误点 6分钟","опоздание на 6 минут"],"compRitardoAndamento":["con un ritardo di 6 min.","6 minutes late","mit einer Verzögerung von 6 Min.","avec un retard de 6 min.","con un retraso de 6 min.","cu o întârziere de 6 min.","6 分の遅延","误点 6分钟","с опозданием в 6 минут"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png22:46","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":10029,"categoria":"REG","categoriaDescrizione":null,"origine":"BARDONECCHIA","codOrigine":"S00202","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"15             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415655900000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:45","compOrarioPartenza":null,"compNumeroTreno":"REG 10029","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png22:45","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":9746,"categoria":"ES*","categoriaDescrizione":null,"origine":"VENEZIA SANTA LUCIA","codOrigine":"S02593","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":true,"codiceCliente":1,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"11             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"B","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415656200000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":17,"tipoProdotto":"102","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"22:50","compOrarioPartenza":null,"compNumeroTreno":"ES* FB 9746","compOrientamento":["1 classe in testa","1st Class in the head","1. Klasse Zugspitze ","1ère classe en tête","1ª clase al inicio del tren","clasa I la începutul trenului","1等車前方","一等车厢在前几节车厢","1 класс в головной части поезда"],"compTipologiaTreno":"nazionale","compClassRitardoTxt":"ritardo01_txt","compClassRitardoLine":"ritardo01_line","compImgRitardo2":"/vt_static/img/legenda/icone_legenda/ritardo01.png","compImgRitardo":"/vt_static/img/legenda/icone_legenda/ritardo01.png","compRitardo":["ritardo 17 min.","delay 17 min.","Verspätung 17 Min.","retard de 17 min.","retraso de 17 min.","întârziere 17 min.","遅延 17 分","误点 17分钟","опоздание на 17 минут"],"compRitardoAndamento":["con un ritardo di 17 min.","17 minutes late","mit einer Verzögerung von 17 Min.","avec un retard de 17 min.","con un retraso de 17 min.","cu o întârziere de 17 min.","17 分の遅延","误点 17分钟","с опозданием в 17 минут"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:07","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":2030,"categoria":"REG","categoriaDescrizione":null,"origine":"MILANO CENTRALE","codOrigine":"S01700","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"13             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415657220000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"23:07","compOrarioPartenza":null,"compNumeroTreno":"REG 2030","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:07","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":9654,"categoria":"ES*","categoriaDescrizione":null,"origine":"ROMA TERMINI","codOrigine":"S08409","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":true,"codiceCliente":1,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"16             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"B","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415657520000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":8,"tipoProdotto":"100","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"23:12","compOrarioPartenza":null,"compNumeroTreno":"ES* FR 9654","compOrientamento":["Executive in testa","Executive in the head","Executive Zugspitze","Executive en tête","Executive al inicio del tren","Executive la începutul trenului","頭の中でExecutive","Executive在前几节车厢","Executive в головной части поезда"],"compTipologiaTreno":"nazionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["ritardo 8 min.","delay 8 min.","Verspätung 8 Min.","retard de 8 min.","retraso de 8 min.","întârziere 8 min.","遅延 8 分","误点 8分钟","опоздание на 8 минут"],"compRitardoAndamento":["con un ritardo di 8 min.","8 minutes late","mit einer Verzögerung von 8 Min.","avec un retard de 8 min.","con un retraso de 8 min.","cu o întârziere de 8 min.","8 分の遅延","误点 8分钟","с опозданием в 8 минут"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:20","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":24877,"categoria":"REG","categoriaDescrizione":null,"origine":"SUSA","codOrigine":"S00260","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"4              ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415657820000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"23:17","compOrarioPartenza":null,"compNumeroTreno":"REG 24877","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:17","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":33800,"categoria":"REG","categoriaDescrizione":null,"origine":"SAVONA","codOrigine":"S04801","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415658900000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"23:35","compOrarioPartenza":null,"compNumeroTreno":"REG 33800","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:35","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":2532,"categoria":"REG","categoriaDescrizione":null,"origine":"GENOVA BRIGNOLE","codOrigine":"S04702","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"5              ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415659200000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"23:40","compOrarioPartenza":null,"compNumeroTreno":"REG 2532","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:40","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":10031,"categoria":"REG","categoriaDescrizione":null,"origine":"BARDONECCHIA","codOrigine":"S00202","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"15             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415659500000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"23:45","compOrarioPartenza":null,"compNumeroTreno":"REG 10031","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png23:45","compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":2032,"categoria":"REG","categoriaDescrizione":null,"origine":"MILANO CENTRALE","codOrigine":"S01700","destinazione":null,"codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":"13             ","binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":null,"subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":null,"orarioArrivo":1415661000000,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":null,"compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":null,"compOrarioArrivoZero":null,"compOrarioArrivo":"00:10","compOrarioPartenza":null,"compNumeroTreno":"REG 2032","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":"/vt_static/img/legenda/icone_legenda/regolare.png00:10","compDurata":"","compImgCambiNumerazione":"  "}]
      JSON
  end

  # stubs for Schedule.find_station_departures
  config.before(:each) do
    stub_request(:get, "http://www.viaggiatreno.it/viaggiatrenonew/resteasy/viaggiatreno/partenze/S00219/Mon%20Nov%2010%202014%2022:18:44%20GMT+0100%20(CET)").
      to_return(status: 200, headers: {}, body: <<-JSON.squish)
        [{"numeroTreno":10030,"categoria":"REG","categoriaDescrizione":null,"origine":null,"codOrigine":"S00219","destinazione":"BARDONECCHIA","codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":"18             ","subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":1415654400000,"orarioArrivo":null,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":"22:20","compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":"22:20","compOrarioArrivoZero":null,"compOrarioArrivo":null,"compOrarioPartenza":"22:20","compNumeroTreno":"REG 10030","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":null,"compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":23601,"categoria":"REG","categoriaDescrizione":null,"origine":null,"codOrigine":"S00219","destinazione":"ALESSANDRIA","codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":"8              ","subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":1415654400000,"orarioArrivo":null,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":"22:20","compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":"22:20","compOrarioArrivoZero":null,"compOrarioArrivo":null,"compOrarioPartenza":"22:20","compNumeroTreno":"REG 23601","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":null,"compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":24835,"categoria":"REG","categoriaDescrizione":null,"origine":null,"codOrigine":"S00219","destinazione":"IVREA","codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":"15             ","subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":1415654880000,"orarioArrivo":null,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":"22:28","compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":"22:28","compOrarioArrivoZero":null,"compOrarioArrivo":null,"compOrarioPartenza":"22:28","compNumeroTreno":"REG 24835","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":null,"compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":24876,"categoria":"REG","categoriaDescrizione":null,"origine":null,"codOrigine":"S00219","destinazione":"BUSSOLENO","codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":"14             ","subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":1415655900000,"orarioArrivo":null,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":"22:45","compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":"22:45","compOrarioArrivoZero":null,"compOrarioArrivo":null,"compOrarioPartenza":"22:45","compNumeroTreno":"REG 24876","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":null,"compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":2033,"categoria":"REG","categoriaDescrizione":null,"origine":null,"codOrigine":"S00219","destinazione":"MILANO CENTRALE","codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":"13             ","subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":1415656440000,"orarioArrivo":null,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":"22:54","compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":"22:54","compOrarioArrivoZero":null,"compOrarioArrivo":null,"compOrarioPartenza":"22:54","compNumeroTreno":"REG 2033","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":null,"compDurata":"","compImgCambiNumerazione":"  "},{"numeroTreno":10221,"categoria":"REG","categoriaDescrizione":null,"origine":null,"codOrigine":"S00219","destinazione":"CUNEO","codDestinazione":null,"origineEstera":null,"destinazioneEstera":null,"oraPartenzaEstera":null,"oraArrivoEstera":null,"tratta":0,"regione":0,"origineZero":null,"destinazioneZero":null,"orarioPartenzaZero":null,"orarioArrivoZero":null,"circolante":false,"codiceCliente":2,"binarioEffettivoArrivoCodice":null,"binarioEffettivoArrivoDescrizione":null,"binarioEffettivoArrivoTipo":null,"binarioProgrammatoArrivoCodice":null,"binarioProgrammatoArrivoDescrizione":null,"binarioEffettivoPartenzaCodice":null,"binarioEffettivoPartenzaDescrizione":null,"binarioEffettivoPartenzaTipo":null,"binarioProgrammatoPartenzaCodice":null,"binarioProgrammatoPartenzaDescrizione":"3              ","subTitle":null,"esisteCorsaZero":null,"orientamento":"","inStazione":false,"haCambiNumero":false,"nonPartito":false,"provvedimento":0,"riprogrammazione":"N","orarioPartenza":1415658300000,"orarioArrivo":null,"stazionePartenza":null,"stazioneArrivo":null,"statoTreno":null,"corrispondenze":null,"servizi":null,"ritardo":0,"tipoProdotto":"","compOrarioPartenzaZeroEffettivo":"23:25","compOrarioArrivoZeroEffettivo":null,"compOrarioPartenzaZero":"23:25","compOrarioArrivoZero":null,"compOrarioArrivo":null,"compOrarioPartenza":"23:25","compNumeroTreno":"REG 10221","compOrientamento":["--","--","--","--","--","--","--","--","--"],"compTipologiaTreno":"regionale","compClassRitardoTxt":"","compClassRitardoLine":"regolare_line","compImgRitardo2":"","compImgRitardo":"/vt_static/img/legenda/icone_legenda/regolare.png","compRitardo":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compRitardoAndamento":["in orario","on time","pünktlich","à l'heure","en horario","conform orarului","定刻","按时","по расписанию"],"compInStazionePartenza":["","","","","","","","",""],"compInStazioneArrivo":["","","","","","","","",""],"compOrarioEffettivoArrivo":null,"compDurata":"","compImgCambiNumerazione":"  "}]
      JSON
  end
end